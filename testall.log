/usr/bin/lli

[1;33m ###### Testing test-comment [0m
./grail.native < tests/new_tests/test-comment.gl > test-comment.ll
/usr/bin/llvm-link test-comment.ll -o a.out
/usr/bin/lli a.out > test-comment.out
diff -b test-comment.out tests/new_tests/test-comment.out > test-comment.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-comparison [0m
./grail.native < tests/new_tests/test-comparison.gl > test-comparison.ll
/usr/bin/llvm-link test-comparison.ll -o a.out
/usr/bin/lli a.out > test-comparison.out
diff -b test-comparison.out tests/new_tests/test-comparison.out > test-comparison.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-edge-1 [0m
./grail.native < tests/new_tests/test-edge-1.gl > test-edge-1.ll
/usr/bin/llvm-link test-edge-1.ll -o a.out
/usr/bin/lli a.out > test-edge-1.out
diff -b test-edge-1.out tests/new_tests/test-edge-1.out > test-edge-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-edge-2 [0m
./grail.native < tests/new_tests/test-edge-2.gl > test-edge-2.ll
/usr/bin/llvm-link test-edge-2.ll -o a.out
/usr/bin/lli a.out > test-edge-2.out
diff -b test-edge-2.out tests/new_tests/test-edge-2.out > test-edge-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-edge-3 [0m
./grail.native < tests/new_tests/test-edge-3.gl > test-edge-3.ll
/usr/bin/llvm-link test-edge-3.ll -o a.out
/usr/bin/lli a.out > test-edge-3.out
diff -b test-edge-3.out tests/new_tests/test-edge-3.out > test-edge-3.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-equality-1 [0m
./grail.native < tests/new_tests/test-equality-1.gl > test-equality-1.ll
/usr/bin/llvm-link test-equality-1.ll -o a.out
/usr/bin/lli a.out > test-equality-1.out
diff -b test-equality-1.out tests/new_tests/test-equality-1.out > test-equality-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-equality-2 [0m
./grail.native < tests/new_tests/test-equality-2.gl > test-equality-2.ll
/usr/bin/llvm-link test-equality-2.ll -o a.out
/usr/bin/lli a.out > test-equality-2.out
diff -b test-equality-2.out tests/new_tests/test-equality-2.out > test-equality-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-float-calculation [0m
./grail.native < tests/new_tests/test-float-calculation.gl > test-float-calculation.ll
/usr/bin/llvm-link test-float-calculation.ll -o a.out
/usr/bin/lli a.out > test-float-calculation.out
diff -b test-float-calculation.out tests/new_tests/test-float-calculation.out > test-float-calculation.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-for-1 [0m
./grail.native < tests/new_tests/test-for-1.gl > test-for-1.ll
/usr/bin/llvm-link test-for-1.ll -o a.out
/usr/bin/lli a.out > test-for-1.out
diff -b test-for-1.out tests/new_tests/test-for-1.out > test-for-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-for-2 [0m
./grail.native < tests/new_tests/test-for-2.gl > test-for-2.ll
/usr/bin/llvm-link test-for-2.ll -o a.out
/usr/bin/lli a.out > test-for-2.out
diff -b test-for-2.out tests/new_tests/test-for-2.out > test-for-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-forin-1 [0m
./grail.native < tests/new_tests/test-forin-1.gl > test-forin-1.ll
/usr/bin/llvm-link test-forin-1.ll -o a.out
/usr/bin/lli a.out > test-forin-1.out
diff -b test-forin-1.out tests/new_tests/test-forin-1.out > test-forin-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-forin-2 [0m
./grail.native < tests/new_tests/test-forin-2.gl > test-forin-2.ll
/usr/bin/llvm-link test-forin-2.ll -o a.out
/usr/bin/lli a.out > test-forin-2.out
diff -b test-forin-2.out tests/new_tests/test-forin-2.out > test-forin-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-from-1 [0m
./grail.native < tests/new_tests/test-from-1.gl > test-from-1.ll
/usr/bin/llvm-link test-from-1.ll -o a.out
/usr/bin/lli a.out > test-from-1.out
diff -b test-from-1.out tests/new_tests/test-from-1.out > test-from-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-function-call-1 [0m
./grail.native < tests/new_tests/test-function-call-1.gl > test-function-call-1.ll
/usr/bin/llvm-link test-function-call-1.ll -o a.out
/usr/bin/lli a.out > test-function-call-1.out
diff -b test-function-call-1.out tests/new_tests/test-function-call-1.out > test-function-call-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-function-call-2 [0m
./grail.native < tests/new_tests/test-function-call-2.gl > test-function-call-2.ll
/usr/bin/llvm-link test-function-call-2.ll -o a.out
/usr/bin/lli a.out > test-function-call-2.out
diff -b test-function-call-2.out tests/new_tests/test-function-call-2.out > test-function-call-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-function-call-3 [0m
./grail.native < tests/new_tests/test-function-call-3.gl > test-function-call-3.ll
/usr/bin/llvm-link test-function-call-3.ll -o a.out
/usr/bin/lli a.out > test-function-call-3.out
diff -b test-function-call-3.out tests/new_tests/test-function-call-3.out > test-function-call-3.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-function-call-4 [0m
./grail.native < tests/new_tests/test-function-call-4.gl > test-function-call-4.ll
/usr/bin/llvm-link test-function-call-4.ll -o a.out
/usr/bin/lli a.out > test-function-call-4.out
diff -b test-function-call-4.out tests/new_tests/test-function-call-4.out > test-function-call-4.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-function-call-5 [0m
./grail.native < tests/new_tests/test-function-call-5.gl > test-function-call-5.ll
/usr/bin/llvm-link test-function-call-5.ll -o a.out
/usr/bin/lli a.out > test-function-call-5.out
diff -b test-function-call-5.out tests/new_tests/test-function-call-5.out > test-function-call-5.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-function-call-6 [0m
./grail.native < tests/new_tests/test-function-call-6.gl > test-function-call-6.ll
/usr/bin/llvm-link test-function-call-6.ll -o a.out
/usr/bin/lli a.out > test-function-call-6.out
diff -b test-function-call-6.out tests/new_tests/test-function-call-6.out > test-function-call-6.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-function-call-7 [0m
./grail.native < tests/new_tests/test-function-call-7.gl > test-function-call-7.ll
/usr/bin/llvm-link test-function-call-7.ll -o a.out
/usr/bin/lli a.out > test-function-call-7.out
diff -b test-function-call-7.out tests/new_tests/test-function-call-7.out > test-function-call-7.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-function-call-8 [0m
./grail.native < tests/new_tests/test-function-call-8.gl > test-function-call-8.ll
/usr/bin/llvm-link test-function-call-8.ll -o a.out
/usr/bin/lli a.out > test-function-call-8.out
diff -b test-function-call-8.out tests/new_tests/test-function-call-8.out > test-function-call-8.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-gcd [0m
./grail.native < tests/new_tests/test-gcd.gl > test-gcd.ll
/usr/bin/llvm-link test-gcd.ll -o a.out
/usr/bin/lli a.out > test-gcd.out
diff -b test-gcd.out tests/new_tests/test-gcd.out > test-gcd.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-hello [0m
./grail.native < tests/new_tests/test-hello.gl > test-hello.ll
/usr/bin/llvm-link test-hello.ll -o a.out
/usr/bin/lli a.out > test-hello.out
diff -b test-hello.out tests/new_tests/test-hello.out > test-hello.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-if-loop-1 [0m
./grail.native < tests/new_tests/test-if-loop-1.gl > test-if-loop-1.ll
/usr/bin/llvm-link test-if-loop-1.ll -o a.out
/usr/bin/lli a.out > test-if-loop-1.out
diff -b test-if-loop-1.out tests/new_tests/test-if-loop-1.out > test-if-loop-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-if-loop-2 [0m
./grail.native < tests/new_tests/test-if-loop-2.gl > test-if-loop-2.ll
/usr/bin/llvm-link test-if-loop-2.ll -o a.out
/usr/bin/lli a.out > test-if-loop-2.out
diff -b test-if-loop-2.out tests/new_tests/test-if-loop-2.out > test-if-loop-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-if-loop-3 [0m
./grail.native < tests/new_tests/test-if-loop-3.gl > test-if-loop-3.ll
/usr/bin/llvm-link test-if-loop-3.ll -o a.out
/usr/bin/lli a.out > test-if-loop-3.out
diff -b test-if-loop-3.out tests/new_tests/test-if-loop-3.out > test-if-loop-3.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-list-1 [0m
./grail.native < tests/new_tests/test-list-1.gl > test-list-1.ll
/usr/bin/llvm-link test-list-1.ll -o a.out
/usr/bin/lli a.out > test-list-1.out
diff -b test-list-1.out tests/new_tests/test-list-1.out > test-list-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-list-2 [0m
./grail.native < tests/new_tests/test-list-2.gl > test-list-2.ll
/usr/bin/llvm-link test-list-2.ll -o a.out
/usr/bin/lli a.out > test-list-2.out
diff -b test-list-2.out tests/new_tests/test-list-2.out > test-list-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-list-3 [0m
./grail.native < tests/new_tests/test-list-3.gl > test-list-3.ll
/usr/bin/llvm-link test-list-3.ll -o a.out
/usr/bin/lli a.out > test-list-3.out
diff -b test-list-3.out tests/new_tests/test-list-3.out > test-list-3.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-print [0m
./grail.native < tests/new_tests/test-print.gl > test-print.ll
/usr/bin/llvm-link test-print.ll -o a.out
/usr/bin/lli a.out > test-print.out
diff -b test-print.out tests/new_tests/test-print.out > test-print.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-record-1 [0m
./grail.native < tests/new_tests/test-record-1.gl > test-record-1.ll
/usr/bin/llvm-link test-record-1.ll -o a.out
/usr/bin/lli a.out > test-record-1.out
diff -b test-record-1.out tests/new_tests/test-record-1.out > test-record-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-record-2 [0m
./grail.native < tests/new_tests/test-record-2.gl > test-record-2.ll
/usr/bin/llvm-link test-record-2.ll -o a.out
/usr/bin/lli a.out > test-record-2.out
diff -b test-record-2.out tests/new_tests/test-record-2.out > test-record-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-return-1 [0m
./grail.native < tests/new_tests/test-return-1.gl > test-return-1.ll
/usr/bin/llvm-link test-return-1.ll -o a.out
/usr/bin/lli a.out > test-return-1.out
diff -b test-return-1.out tests/new_tests/test-return-1.out > test-return-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-size-1 [0m
./grail.native < tests/new_tests/test-size-1.gl > test-size-1.ll
/usr/bin/llvm-link test-size-1.ll -o a.out
/usr/bin/lli a.out > test-size-1.out
diff -b test-size-1.out tests/new_tests/test-size-1.out > test-size-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-to-1 [0m
./grail.native < tests/new_tests/test-to-1.gl > test-to-1.ll
/usr/bin/llvm-link test-to-1.ll -o a.out
/usr/bin/lli a.out > test-to-1.out
diff -b test-to-1.out tests/new_tests/test-to-1.out > test-to-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-while-1 [0m
./grail.native < tests/new_tests/test-while-1.gl > test-while-1.ll
/usr/bin/llvm-link test-while-1.ll -o a.out
/usr/bin/lli a.out > test-while-1.out
diff -b test-while-1.out tests/new_tests/test-while-1.out > test-while-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing test-while-2 [0m
./grail.native < tests/new_tests/test-while-2.gl > test-while-2.ll
/usr/bin/llvm-link test-while-2.ll -o a.out
/usr/bin/lli a.out > test-while-2.out
diff -b test-while-2.out tests/new_tests/test-while-2.out > test-while-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-assign-1 [0m
./grail.native < tests/new_tests/fail-assign-1.gl 2> fail-assign-1.err >> testall.log
diff -b fail-assign-1.err tests/new_tests/fail-assign-1.err > fail-assign-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-assign-2 [0m
./grail.native < tests/new_tests/fail-assign-2.gl 2> fail-assign-2.err >> testall.log
diff -b fail-assign-2.err tests/new_tests/fail-assign-2.err > fail-assign-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-dead-1 [0m
./grail.native < tests/new_tests/fail-dead-1.gl 2> fail-dead-1.err >> testall.log
diff -b fail-dead-1.err tests/new_tests/fail-dead-1.err > fail-dead-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-dead-2 [0m
./grail.native < tests/new_tests/fail-dead-2.gl 2> fail-dead-2.err >> testall.log
diff -b fail-dead-2.err tests/new_tests/fail-dead-2.err > fail-dead-2.diff
FAILED fail-dead-2.err differs from tests/new_tests/fail-dead-2.err
[0;31m ###### FAILED [0m

[1;33m ###### Testing fail-expr-1 [0m
./grail.native < tests/new_tests/fail-expr-1.gl 2> fail-expr-1.err >> testall.log
diff -b fail-expr-1.err tests/new_tests/fail-expr-1.err > fail-expr-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-expr-2 [0m
./grail.native < tests/new_tests/fail-expr-2.gl 2> fail-expr-2.err >> testall.log
diff -b fail-expr-2.err tests/new_tests/fail-expr-2.err > fail-expr-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-for-1 [0m
./grail.native < tests/new_tests/fail-for-1.gl 2> fail-for-1.err >> testall.log
diff -b fail-for-1.err tests/new_tests/fail-for-1.err > fail-for-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-for-2 [0m
./grail.native < tests/new_tests/fail-for-2.gl 2> fail-for-2.err >> testall.log
diff -b fail-for-2.err tests/new_tests/fail-for-2.err > fail-for-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-for-3 [0m
./grail.native < tests/new_tests/fail-for-3.gl 2> fail-for-3.err >> testall.log
diff -b fail-for-3.err tests/new_tests/fail-for-3.err > fail-for-3.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-for-4 [0m
./grail.native < tests/new_tests/fail-for-4.gl 2> fail-for-4.err >> testall.log
diff -b fail-for-4.err tests/new_tests/fail-for-4.err > fail-for-4.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-for-5 [0m
./grail.native < tests/new_tests/fail-for-5.gl 2> fail-for-5.err >> testall.log
diff -b fail-for-5.err tests/new_tests/fail-for-5.err > fail-for-5.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-func-1 [0m
./grail.native < tests/new_tests/fail-func-1.gl 2> fail-func-1.err >> testall.log
diff -b fail-func-1.err tests/new_tests/fail-func-1.err > fail-func-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-func-2 [0m
./grail.native < tests/new_tests/fail-func-2.gl 2> fail-func-2.err >> testall.log
diff -b fail-func-2.err tests/new_tests/fail-func-2.err > fail-func-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-func-3 [0m
./grail.native < tests/new_tests/fail-func-3.gl 2> fail-func-3.err >> testall.log
diff -b fail-func-3.err tests/new_tests/fail-func-3.err > fail-func-3.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-func-4 [0m
./grail.native < tests/new_tests/fail-func-4.gl 2> fail-func-4.err >> testall.log
diff -b fail-func-4.err tests/new_tests/fail-func-4.err > fail-func-4.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-func-5 [0m
./grail.native < tests/new_tests/fail-func-5.gl 2> fail-func-5.err >> testall.log
diff -b fail-func-5.err tests/new_tests/fail-func-5.err > fail-func-5.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-func-arg-num [0m
./grail.native < tests/new_tests/fail-func-arg-num.gl 2> fail-func-arg-num.err >> testall.log
diff -b fail-func-arg-num.err tests/new_tests/fail-func-arg-num.err > fail-func-arg-num.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-function-return [0m
./grail.native < tests/new_tests/fail-function-return.gl 2> fail-function-return.err >> testall.log
; ModuleID = 'Grail'

@fmt = private unnamed_addr constant [4 x i8] c"%d\0A\00"
@fmt1 = private unnamed_addr constant [4 x i8] c"%f\0A\00"
@fmt2 = private unnamed_addr constant [4 x i8] c"%d\0A\00"
@fmt3 = private unnamed_addr constant [4 x i8] c"%f\0A\00"
@fmt4 = private unnamed_addr constant [4 x i8] c"%d\0A\00"
@fmt5 = private unnamed_addr constant [4 x i8] c"%f\0A\00"
@str = private unnamed_addr constant [4 x i8] c"sdf\00"

declare i32 @printf(i8*, ...)

declare i32 @sample_display(i32)

define i8* @"function!1"(i8* %x) {
entry:
  %x1 = alloca i8*
  store i8* %x, i8** %x1
  %x2 = load i8** %x1
  ret i8* %x2
}

define i8* @"function!2"(i8* %x) {
entry:
  %x1 = alloca i8*
  store i8* %x, i8** %x1
  %x2 = load i8** %x1
  ret i8* %x2
}

define void @main() {
entry:
  %x = alloca i32
  store i32 3, i32* %x
  %"function!2_result" = call i8* @"function!2"(i8* getelementptr inbounds ([4 x i8]* @str, i32 0, i32 0))
  ret void
}
[0;31m ###### FAILED [0m
mv: cannot stat ‘fail-function-return.diff’: No such file or directory

[1;33m ###### Testing fail-if-1 [0m
./grail.native < tests/new_tests/fail-if-1.gl 2> fail-if-1.err >> testall.log
diff -b fail-if-1.err tests/new_tests/fail-if-1.err > fail-if-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-if-2 [0m
./grail.native < tests/new_tests/fail-if-2.gl 2> fail-if-2.err >> testall.log
diff -b fail-if-2.err tests/new_tests/fail-if-2.err > fail-if-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-if-3 [0m
./grail.native < tests/new_tests/fail-if-3.gl 2> fail-if-3.err >> testall.log
diff -b fail-if-3.err tests/new_tests/fail-if-3.err > fail-if-3.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-nomain [0m
./grail.native < tests/new_tests/fail-nomain.gl 2> fail-nomain.err >> testall.log
; ModuleID = 'Grail'

@fmt = private unnamed_addr constant [4 x i8] c"%d\0A\00"
@fmt1 = private unnamed_addr constant [4 x i8] c"%f\0A\00"

declare i32 @printf(i8*, ...)

declare i32 @sample_display(i32)

define void @f() {
entry:
  ret void
}
[0;31m ###### FAILED [0m
mv: cannot stat ‘fail-nomain.diff’: No such file or directory

[1;33m ###### Testing fail-record-1 [0m
./grail.native < tests/new_tests/fail-record-1.gl 2> fail-record-1.err >> testall.log
diff -b fail-record-1.err tests/new_tests/fail-record-1.err > fail-record-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-return-1 [0m
./grail.native < tests/new_tests/fail-return-1.gl 2> fail-return-1.err >> testall.log
; ModuleID = 'Grail'

@fmt = private unnamed_addr constant [4 x i8] c"%d\0A\00"
@fmt1 = private unnamed_addr constant [4 x i8] c"%f\0A\00"

declare i32 @printf(i8*, ...)

declare i32 @sample_display(i32)

define i1 @main() {
entry:
  ret i1 true
}
[0;31m ###### FAILED [0m
mv: cannot stat ‘fail-return-1.diff’: No such file or directory

[1;33m ###### Testing fail-return-2 [0m
./grail.native < tests/new_tests/fail-return-2.gl 2> fail-return-2.err >> testall.log
diff -b fail-return-2.err tests/new_tests/fail-return-2.err > fail-return-2.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-return-twice [0m
./grail.native < tests/new_tests/fail-return-twice.gl 2> fail-return-twice.err >> testall.log
; ModuleID = 'Grail'

@fmt = private unnamed_addr constant [4 x i8] c"%d\0A\00"
@fmt1 = private unnamed_addr constant [4 x i8] c"%f\0A\00"
@fmt2 = private unnamed_addr constant [4 x i8] c"%d\0A\00"
@fmt3 = private unnamed_addr constant [4 x i8] c"%f\0A\00"
@fmt4 = private unnamed_addr constant [4 x i8] c"%d\0A\00"
@fmt5 = private unnamed_addr constant [4 x i8] c"%f\0A\00"
@fmt6 = private unnamed_addr constant [4 x i8] c"%d\0A\00"
@fmt7 = private unnamed_addr constant [4 x i8] c"%f\0A\00"
@fmt8 = private unnamed_addr constant [4 x i8] c"%d\0A\00"
@fmt9 = private unnamed_addr constant [4 x i8] c"%f\0A\00"
@str = private unnamed_addr constant [4 x i8] c"sdf\00"

declare i32 @printf(i8*, ...)

declare i32 @sample_display(i32)

define i32 @"f!1"(i32 %x) {
entry:
  %x1 = alloca i32
  store i32 %x, i32* %x1
  %x2 = load i32* %x1
  ret i32 %x2
}

define i8* @"f!2"(i8* %x) {
entry:
  %x1 = alloca i8*
  store i8* %x, i8** %x1
  %x2 = load i8** %x1
  ret i8* %x2
}

define i32 @"f!3"(i32 %x) {
entry:
  %x1 = alloca i32
  store i32 %x, i32* %x1
  %x2 = load i32* %x1
  ret i32 %x2
}

define i8* @"f!4"(i8* %x) {
entry:
  %x1 = alloca i8*
  store i8* %x, i8** %x1
  %x2 = load i8** %x1
  ret i8* %x2
}

define void @main() {
entry:
  %z = alloca i32
  store i32 3, i32* %z
  %z1 = load i32* %z
  %"f!3_result" = call i32 @"f!3"(i32 %z1)
  %y = alloca i8*
  store i8* getelementptr inbounds ([4 x i8]* @str, i32 0, i32 0), i8** %y
  %y2 = load i8** %y
  %"f!4_result" = call i8* @"f!4"(i8* %y2)
  ret void
}
[0;31m ###### FAILED [0m
mv: cannot stat ‘fail-return-twice.diff’: No such file or directory

[1;33m ###### Testing fail-while-1 [0m
./grail.native < tests/new_tests/fail-while-1.gl 2> fail-while-1.err >> testall.log
diff -b fail-while-1.err tests/new_tests/fail-while-1.err > fail-while-1.diff
[0;32m ###### SUCCESS [0m

[1;33m ###### Testing fail-while-2 [0m
./grail.native < tests/new_tests/fail-while-2.gl 2> fail-while-2.err >> testall.log
diff -b fail-while-2.err tests/new_tests/fail-while-2.err > fail-while-2.diff
[0;32m ###### SUCCESS [0m
